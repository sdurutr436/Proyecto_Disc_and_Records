import{a as x}from"./chunk-QHX3734H.js";import{a as k}from"./chunk-RI6RE5LA.js";import{a as V}from"./chunk-7RZ4YV7C.js";import{a as L}from"./chunk-UXZ6JKO6.js";import{c as d,e as E,f as F,g as w,i as A,k as N,o as T}from"./chunk-S7USVMU2.js";import{a as D}from"./chunk-6M2LVSLQ.js";import"./chunk-JA24WYK3.js";import{Ab as b,Cb as m,Eb as u,Fc as P,Pa as i,Pb as l,Qb as y,ca as v,cb as S,da as C,hc as h,ma as p,nb as f,ob as _,sb as o,tb as r,ub as n,vb as g}from"./chunk-7KKLOBFE.js";function q(a,s){if(a&1){let e=b();r(0,"app-alert",19),m("dismissed",function(){v(e);let c=u();return C(c.successMessage.set(null))}),n()}if(a&2){let e=u();o("message",e.successMessage())("dismissible",!0)}}function G(a,s){if(a&1){let e=b();r(0,"app-alert",20),m("dismissed",function(){v(e);let c=u();return C(c.errorMessage.set(null))}),n()}if(a&2){let e=u();o("message",e.errorMessage())("dismissible",!0)}}function I(a,s){if(a&1&&(g(0,"app-progress-bar",21),r(1,"p",22),l(2),n()),a&2){let e=u();o("value",e.passwordStrength())("showLabel",!0)("variant",e.passwordStrengthVariant()),i(2),y(e.passwordStrengthLabel())}}var M=class a{isLoading=p(!1);successMessage=p(null);errorMessage=p(null);showPasswordModal=p(!1);emailForm=new F({email:new w("perrete@example.com",{nonNullable:!0,validators:[d.required,d.email]})});passwordForm=new F({currentPassword:new w("",{nonNullable:!0,validators:[d.required]}),newPassword:new w("",{nonNullable:!0,validators:[d.required,d.minLength(8)]}),confirmPassword:new w("",{nonNullable:!0,validators:[d.required]})},{validators:this.passwordMatchValidator});passwordMatchValidator(s){let e=s.get("newPassword")?.value,t=s.get("confirmPassword")?.value;return e===t?null:{passwordMismatch:!0}}passwordStrength=h(()=>{let s=this.passwordForm.controls.newPassword.value;if(!s)return 0;let e=0;return s.length>=8&&(e+=25),/[A-Z]/.test(s)&&(e+=25),/[a-z]/.test(s)&&(e+=25),/[0-9]/.test(s)&&(e+=15),/[^a-zA-Z0-9]/.test(s)&&(e+=10),Math.min(e,100)});passwordStrengthLabel=h(()=>{let s=this.passwordStrength();return s<25?"Muy d\xE9bil":s<50?"D\xE9bil":s<75?"Aceptable":"Fuerte"});passwordStrengthVariant=h(()=>{let s=this.passwordStrength();return s<50?"error":s<75?"warning":"success"});onSubmitEmail(){if(this.emailForm.invalid){this.errorMessage.set("Por favor, ingresa un email v\xE1lido"),setTimeout(()=>this.errorMessage.set(null),3e3);return}this.isLoading.set(!0),setTimeout(()=>{this.isLoading.set(!1),this.successMessage.set("Email actualizado correctamente"),this.emailForm.markAsPristine(),setTimeout(()=>this.successMessage.set(null),3e3)},1e3)}onPasswordChange(){if(this.passwordForm.invalid){this.passwordForm.hasError("passwordMismatch")?this.errorMessage.set("Las contrase\xF1as no coinciden"):this.errorMessage.set("Por favor, completa todos los campos correctamente"),setTimeout(()=>this.errorMessage.set(null),3e3);return}this.showPasswordModal.set(!0)}confirmPasswordChange(){this.showPasswordModal.set(!1),this.isLoading.set(!0),setTimeout(()=>{this.isLoading.set(!1),this.emailForm.markAsPristine(),this.passwordForm.markAsPristine(),this.successMessage.set("Contrase\xF1a actualizada correctamente"),this.passwordForm.reset(),setTimeout(()=>this.successMessage.set(null),3e3)},1e3)}canDeactivate(){return!this.emailForm.dirty&&!this.passwordForm.dirty?!0:confirm("\xBFDeseas salir sin guardar los cambios en tu cuenta?")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["app-settings-account"]],decls:35,vars:16,consts:[[1,"settings-account"],["type","success",3,"message","dismissible"],["type","error",3,"message","dismissible"],[1,"settings-account__header"],[1,"settings-account__title"],[1,"settings-account__subtitle"],[1,"settings-account__section"],[1,"settings-account__section-title"],[1,"settings-account__form",3,"formGroup"],["label","Email","type","email","placeholder","tu@email.com","hint","Recibir\xE1s notificaciones importantes en este correo.",3,"control","required"],[1,"settings-account__actions"],["variant","primary","type","button",3,"click","disabled"],["label","Contrase\xF1a Actual","type","password","placeholder","Ingresa tu contrase\xF1a actual",3,"control","required"],["label","Nueva Contrase\xF1a","type","password","placeholder","Ingresa la nueva contrase\xF1a",3,"control","required"],["label","Confirmar Nueva Contrase\xF1a","type","password","placeholder","Confirma la nueva contrase\xF1a",3,"control","required"],["title","Confirmar cambio de contrase\xF1a",3,"onClose","isOpen"],["modal-footer","",1,"settings-account__modal-actions"],["variant","ghost",3,"click"],["variant","primary",3,"click"],["type","success",3,"dismissed","message","dismissible"],["type","error",3,"dismissed","message","dismissible"],[3,"value","showLabel","variant"],[1,"settings-account__strength-label"]],template:function(e,t){e&1&&(r(0,"div",0),f(1,q,1,2,"app-alert",1),f(2,G,1,2,"app-alert",2),r(3,"header",3)(4,"h2",4),l(5,"Informaci\xF3n de Cuenta"),n(),r(6,"p",5),l(7,"Gestiona tu email y contrase\xF1a"),n()(),r(8,"section",6)(9,"h3",7),l(10,"Correo Electr\xF3nico"),n(),r(11,"form",8),g(12,"app-form-input",9),r(13,"div",10)(14,"app-button",11),m("click",function(){return t.onSubmitEmail()}),l(15," Actualizar Email "),n()()()(),r(16,"section",6)(17,"h3",7),l(18,"Cambiar Contrase\xF1a"),n(),r(19,"form",8),g(20,"app-form-input",12)(21,"app-form-input",13),f(22,I,3,4),g(23,"app-form-input",14),r(24,"div",10)(25,"app-button",11),m("click",function(){return t.onPasswordChange()}),l(26," Cambiar Contrase\xF1a "),n()()()()(),r(27,"app-modal",15),m("onClose",function(){return t.showPasswordModal.set(!1)}),r(28,"p"),l(29,"\xBFEst\xE1s seguro de que deseas cambiar tu contrase\xF1a? Deber\xE1s usarla en tu pr\xF3ximo inicio de sesi\xF3n."),n(),r(30,"div",16)(31,"app-button",17),m("click",function(){return t.showPasswordModal.set(!1)}),l(32," Cancelar "),n(),r(33,"app-button",18),m("click",function(){return t.confirmPasswordChange()}),l(34," Confirmar "),n()()()),e&2&&(i(),_(t.successMessage()?1:-1),i(),_(t.errorMessage()?2:-1),i(9),o("formGroup",t.emailForm),i(),o("control",t.emailForm.controls.email)("required",!0),i(2),o("disabled",t.emailForm.controls.email.invalid||t.isLoading()),i(5),o("formGroup",t.passwordForm),i(),o("control",t.passwordForm.controls.currentPassword)("required",!0),i(),o("control",t.passwordForm.controls.newPassword)("required",!0),i(),_(t.passwordForm.controls.newPassword.value.length>0?22:-1),i(),o("control",t.passwordForm.controls.confirmPassword)("required",!0),i(2),o("disabled",t.passwordForm.invalid||t.isLoading()),i(2),o("isOpen",t.showPasswordModal()))},dependencies:[P,T,A,E,N,L,D,V,k,x],styles:['@charset "UTF-8";']})};export{M as default};
