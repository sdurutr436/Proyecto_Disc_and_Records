import{a as D}from"./chunk-WQIHDKEI.js";import{a as q}from"./chunk-K2B3CQRK.js";import{a as x}from"./chunk-TKIQ4C2I.js";import{a as V}from"./chunk-C24EJCZF.js";import{c as u,e as E,f as M,g as w,i as A,k as N,o as T}from"./chunk-EJY2DXOJ.js";import{a as L}from"./chunk-G7M7EKCO.js";import"./chunk-TFIATY5C.js";import{$b as h,Ja as o,Jb as l,Kb as y,Ya as F,Z as v,_ as C,ha as p,hb as _,ib as f,mb as n,nb as r,ob as i,pb as g,ub as b,wb as d,wc as P,yb as m}from"./chunk-BRYW362N.js";function k(a,s){if(a&1){let e=b();r(0,"app-alert",19),d("dismissed",function(){v(e);let c=m();return C(c.successMessage.set(null))}),i()}if(a&2){let e=m();n("message",e.successMessage())("dismissible",!0)}}function G(a,s){if(a&1){let e=b();r(0,"app-alert",20),d("dismissed",function(){v(e);let c=m();return C(c.errorMessage.set(null))}),i()}if(a&2){let e=m();n("message",e.errorMessage())("dismissible",!0)}}function I(a,s){if(a&1&&(g(0,"app-progress-bar",21),r(1,"p",22),l(2),i()),a&2){let e=m();n("value",e.passwordStrength())("showLabel",!0)("variant",e.passwordStrengthVariant()),o(2),y(e.passwordStrengthLabel())}}var S=class a{isLoading=p(!1);successMessage=p(null);errorMessage=p(null);showPasswordModal=p(!1);emailForm=new M({email:new w("perrete@example.com",{nonNullable:!0,validators:[u.required,u.email]})});passwordForm=new M({currentPassword:new w("",{nonNullable:!0,validators:[u.required]}),newPassword:new w("",{nonNullable:!0,validators:[u.required,u.minLength(8)]}),confirmPassword:new w("",{nonNullable:!0,validators:[u.required]})},{validators:this.passwordMatchValidator});passwordMatchValidator(s){let e=s.get("newPassword")?.value,t=s.get("confirmPassword")?.value;return e===t?null:{passwordMismatch:!0}}passwordStrength=h(()=>{let s=this.passwordForm.controls.newPassword.value;if(!s)return 0;let e=0;return s.length>=8&&(e+=25),/[A-Z]/.test(s)&&(e+=25),/[a-z]/.test(s)&&(e+=25),/[0-9]/.test(s)&&(e+=15),/[^a-zA-Z0-9]/.test(s)&&(e+=10),Math.min(e,100)});passwordStrengthLabel=h(()=>{let s=this.passwordStrength();return s<25?"Muy d\xE9bil":s<50?"D\xE9bil":s<75?"Aceptable":"Fuerte"});passwordStrengthVariant=h(()=>{let s=this.passwordStrength();return s<50?"error":s<75?"warning":"success"});onSubmitEmail(){if(this.emailForm.invalid){this.errorMessage.set("Por favor, ingresa un email v\xE1lido"),setTimeout(()=>this.errorMessage.set(null),3e3);return}this.isLoading.set(!0),setTimeout(()=>{this.isLoading.set(!1),this.successMessage.set("Email actualizado correctamente"),this.emailForm.markAsPristine(),setTimeout(()=>this.successMessage.set(null),3e3)},1e3)}onPasswordChange(){if(this.passwordForm.invalid){this.passwordForm.hasError("passwordMismatch")?this.errorMessage.set("Las contrase\xF1as no coinciden"):this.errorMessage.set("Por favor, completa todos los campos correctamente"),setTimeout(()=>this.errorMessage.set(null),3e3);return}this.showPasswordModal.set(!0)}confirmPasswordChange(){this.showPasswordModal.set(!1),this.isLoading.set(!0),setTimeout(()=>{this.isLoading.set(!1),this.successMessage.set("Contrase\xF1a actualizada correctamente"),this.passwordForm.reset(),setTimeout(()=>this.successMessage.set(null),3e3)},1e3)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=F({type:a,selectors:[["app-settings-account"]],decls:35,vars:16,consts:[[1,"settings-account"],["type","success",3,"message","dismissible"],["type","error",3,"message","dismissible"],[1,"settings-account__header"],[1,"settings-account__title"],[1,"settings-account__subtitle"],[1,"settings-account__section"],[1,"settings-account__section-title"],[1,"settings-account__form",3,"formGroup"],["label","Email","type","email","placeholder","tu@email.com","hint","Recibir\xE1s notificaciones importantes en este correo.",3,"control","required"],[1,"settings-account__actions"],["variant","primary","type","button",3,"click","disabled"],["label","Contrase\xF1a Actual","type","password","placeholder","Ingresa tu contrase\xF1a actual",3,"control","required"],["label","Nueva Contrase\xF1a","type","password","placeholder","Ingresa la nueva contrase\xF1a",3,"control","required"],["label","Confirmar Nueva Contrase\xF1a","type","password","placeholder","Confirma la nueva contrase\xF1a",3,"control","required"],["title","Confirmar cambio de contrase\xF1a",3,"onClose","isOpen"],["modal-footer","",1,"settings-account__modal-actions"],["variant","ghost",3,"click"],["variant","primary",3,"click"],["type","success",3,"dismissed","message","dismissible"],["type","error",3,"dismissed","message","dismissible"],[3,"value","showLabel","variant"],[1,"settings-account__strength-label"]],template:function(e,t){e&1&&(r(0,"div",0),_(1,k,1,2,"app-alert",1),_(2,G,1,2,"app-alert",2),r(3,"header",3)(4,"h2",4),l(5,"Informaci\xF3n de Cuenta"),i(),r(6,"p",5),l(7,"Gestiona tu email y contrase\xF1a"),i()(),r(8,"section",6)(9,"h3",7),l(10,"Correo Electr\xF3nico"),i(),r(11,"form",8),g(12,"app-form-input",9),r(13,"div",10)(14,"app-button",11),d("click",function(){return t.onSubmitEmail()}),l(15," Actualizar Email "),i()()()(),r(16,"section",6)(17,"h3",7),l(18,"Cambiar Contrase\xF1a"),i(),r(19,"form",8),g(20,"app-form-input",12)(21,"app-form-input",13),_(22,I,3,4),g(23,"app-form-input",14),r(24,"div",10)(25,"app-button",11),d("click",function(){return t.onPasswordChange()}),l(26," Cambiar Contrase\xF1a "),i()()()()(),r(27,"app-modal",15),d("onClose",function(){return t.showPasswordModal.set(!1)}),r(28,"p"),l(29,"\xBFEst\xE1s seguro de que deseas cambiar tu contrase\xF1a? Deber\xE1s usarla en tu pr\xF3ximo inicio de sesi\xF3n."),i(),r(30,"div",16)(31,"app-button",17),d("click",function(){return t.showPasswordModal.set(!1)}),l(32," Cancelar "),i(),r(33,"app-button",18),d("click",function(){return t.confirmPasswordChange()}),l(34," Confirmar "),i()()()),e&2&&(o(),f(t.successMessage()?1:-1),o(),f(t.errorMessage()?2:-1),o(9),n("formGroup",t.emailForm),o(),n("control",t.emailForm.controls.email)("required",!0),o(2),n("disabled",t.emailForm.controls.email.invalid||t.isLoading()),o(5),n("formGroup",t.passwordForm),o(),n("control",t.passwordForm.controls.currentPassword)("required",!0),o(),n("control",t.passwordForm.controls.newPassword)("required",!0),o(),f(t.passwordForm.controls.newPassword.value.length>0?22:-1),o(),n("control",t.passwordForm.controls.confirmPassword)("required",!0),o(2),n("disabled",t.passwordForm.invalid||t.isLoading()),o(2),n("isOpen",t.showPasswordModal()))},dependencies:[P,T,A,E,N,V,L,x,q,D],styles:['@charset "UTF-8";']})};export{S as default};
