import{c as A}from"./chunk-GFAR6U6U.js";import{A as g,C as c,G as a,L as h,U as m,Z as v,n as o,o as n,qa as f,s as p}from"./chunk-7KKLOBFE.js";var l={baseUrl:"http://localhost:8080/api",timeout:3e4,maxRetries:2,retryDelay:1e3,apiVersion:"v1"},d={auth:{login:"/auth/login",logout:"/auth/logout",register:"/auth/register",refresh:"/auth/refresh",me:"/auth/me",forgotPassword:"/auth/forgot-password",resetPassword:"/auth/reset-password"},users:{getAll:"/users",getById:t=>`/users/${t}`,create:"/users",update:t=>`/users/${t}`,delete:t=>`/users/${t}`,profile:"/users/profile",updateProfile:"/users/profile",changePassword:"/users/change-password"},albums:{getAll:"/albums",getById:t=>`/albums/${t}`,create:"/albums",update:t=>`/albums/${t}`,delete:t=>`/albums/${t}`,search:"/albums/search",getTracks:t=>`/albums/${t}/tracks`,getReviews:t=>`/albums/${t}/reviews`,addReview:t=>`/albums/${t}/reviews`},artists:{getAll:"/artists",getById:t=>`/artists/${t}`,create:"/artists",update:t=>`/artists/${t}`,delete:t=>`/artists/${t}`,search:"/artists/search",getAlbums:t=>`/artists/${t}/albums`},songs:{getAll:"/songs",getById:t=>`/songs/${t}`,create:"/songs",update:t=>`/songs/${t}`,delete:t=>`/songs/${t}`,search:"/songs/search",getReviews:t=>`/songs/${t}/reviews`,addReview:t=>`/songs/${t}/reviews`},search:{global:"/search",suggestions:"/search/suggestions"},validation:{emailExists:"/validation/email",usernameExists:"/validation/username"}};var T={authToken:"disc_and_records_token",refreshToken:"disc_and_records_refresh_token",user:"disc_and_records_user"};var b=class{http=v(A);baseUrl=l.baseUrl;buildUrl(e){if(e.startsWith("http://")||e.startsWith("https://"))return e;let r=e.startsWith("/")?e:`/${e}`;return`${this.baseUrl}${r}`}get(e,r){let s=this.buildUrl(e);return this.http.get(s,r).pipe(p(l.timeout),h({count:l.maxRetries,delay:(i,u)=>this.shouldRetry(i)?(console.warn(`Retrying request (${u}/${l.maxRetries}):`,s),g(l.retryDelay*u)):n(()=>i)}),c(i=>this.handleError(i,"GET",s)))}post(e,r,s){let i=this.buildUrl(e);return this.http.post(i,r,s).pipe(p(l.timeout),c(u=>this.handleError(u,"POST",i)))}put(e,r,s){let i=this.buildUrl(e);return this.http.put(i,r,s).pipe(p(l.timeout),c(u=>this.handleError(u,"PUT",i)))}patch(e,r,s){let i=this.buildUrl(e);return this.http.patch(i,r,s).pipe(p(l.timeout),c(u=>this.handleError(u,"PATCH",i)))}delete(e,r){let s=this.buildUrl(e);return this.http.delete(s,r).pipe(p(l.timeout),c(i=>this.handleError(i,"DELETE",s)))}shouldRetry(e){return e.status===0||e.status>=500&&e.status<600}handleError(e,r,s){let i="Ocurri\xF3 un error desconocido";return e.error instanceof ErrorEvent?(i=`Error de red: ${e.error.message}`,console.error("Client-side error:",e.error)):(i=this.getServerErrorMessage(e),console.error(`Backend returned code ${e.status}, method: ${r}, URL: ${s}, body was:`,e.error)),n(()=>({status:e.status,message:i,originalError:e,timestamp:new Date().toISOString()}))}getServerErrorMessage(e){if(e.error?.message)return e.error.message;if(e.error?.error)return e.error.error;switch(e.status){case 400:return"Petici\xF3n inv\xE1lida. Por favor, verifica los datos enviados.";case 401:return"No autorizado. Por favor, inicia sesi\xF3n.";case 403:return"No tienes permisos para realizar esta acci\xF3n.";case 404:return"Recurso no encontrado.";case 409:return"Conflicto. El recurso ya existe.";case 422:return"Datos de validaci\xF3n incorrectos.";case 429:return"Demasiadas peticiones. Por favor, espera un momento.";case 500:return"Error interno del servidor. Por favor, intenta m\xE1s tarde.";case 503:return"Servicio no disponible. Por favor, intenta m\xE1s tarde.";default:return`Error del servidor (${e.status}). Por favor, intenta m\xE1s tarde.`}}};var w=class t extends b{mockAlbums=[{id:"1",title:"The Dark Side of the Moon",artist:"Pink Floyd",artistId:"artist-1",coverUrl:"https://picsum.photos/seed/album1/400/400",releaseYear:1973,genre:"Progressive Rock",tracks:10,duration:"42:49",label:"Harvest Records",description:"Uno de los \xE1lbumes m\xE1s ic\xF3nicos e influyentes de la historia del rock progresivo. Explora temas de conflicto, avaricia, tiempo y salud mental.",averageRating:4.8,totalReviews:1523},{id:"2",title:"Abbey Road",artist:"The Beatles",artistId:"artist-2",coverUrl:"https://picsum.photos/seed/album2/400/400",releaseYear:1969,genre:"Rock",tracks:17,duration:"47:23",label:"Apple Records",description:"El und\xE9cimo \xE1lbum de estudio de The Beatles. Considerado uno de los mejores \xE1lbumes de todos los tiempos.",averageRating:4.9,totalReviews:2104},{id:"3",title:"Thriller",artist:"Michael Jackson",artistId:"artist-3",coverUrl:"https://picsum.photos/seed/album3/400/400",releaseYear:1982,genre:"Pop",tracks:9,duration:"42:16",label:"Epic Records",description:"El \xE1lbum m\xE1s vendido de todos los tiempos. Revolucion\xF3 la industria musical y estableci\xF3 nuevos est\xE1ndares de producci\xF3n.",averageRating:4.7,totalReviews:3421}];mockTracks={1:[{id:"t1-1",number:1,title:"Speak to Me",duration:"1:30"},{id:"t1-2",number:2,title:"Breathe",duration:"2:43"},{id:"t1-3",number:3,title:"On the Run",duration:"3:30"},{id:"t1-4",number:4,title:"Time",duration:"6:53"},{id:"t1-5",number:5,title:"The Great Gig in the Sky",duration:"4:36"}],2:[{id:"t2-1",number:1,title:"Come Together",duration:"4:20"},{id:"t2-2",number:2,title:"Something",duration:"3:03"},{id:"t2-3",number:3,title:"Here Comes the Sun",duration:"3:05"}],3:[{id:"t3-1",number:1,title:"Wanna Be Startin' Somethin'",duration:"6:03"},{id:"t3-2",number:2,title:"Thriller",duration:"5:57"},{id:"t3-3",number:3,title:"Beat It",duration:"4:18"}]};mockReviews={1:[{id:"r1-1",userId:"u1",userName:"John Music",userAvatar:"https://i.pravatar.cc/150?img=1",rating:5,content:"Una obra maestra absoluta. Cada canci\xF3n es un viaje emocional.",date:new Date("2024-01-15"),likes:42}]};getAlbumById(e){return this.getAlbumByIdMock(e)}getAlbumByIdHttp(e){return this.get(d.albums.getById(e)).pipe(c(r=>r.status===404?o(null):n(()=>r)))}getAlbumByIdMock(e){let r=this.mockAlbums.find(s=>s.id===e);return r?o(r).pipe(a(500)):n(()=>new Error(`Album with id ${e} not found`)).pipe(a(300))}getAlbumTracks(e){return this.getAlbumTracksMock(e)}getAlbumReviews(e){return this.getAlbumReviewsMock(e)}searchAlbums(e){return this.searchAlbumsMock(e)}getAllAlbums(){return this.getAllAlbumsMock()}addAlbumReview(e,r){return this.post(d.albums.addReview(e),r)}getAlbumTracksHttp(e){return this.get(d.albums.getTracks(e))}getAlbumReviewsHttp(e){return this.get(d.albums.getReviews(e))}searchAlbumsHttp(e){return this.get(d.albums.search,{params:{q:e}})}getAllAlbumsHttp(){return this.get(d.albums.getAll)}getAlbumTracksMock(e){let r=this.mockTracks[e]||[];return o(r).pipe(a(300))}getAlbumReviewsMock(e){let r=this.mockReviews[e]||[];return o(r).pipe(a(300))}searchAlbumsMock(e){let r=this.mockAlbums.filter(s=>s.title.toLowerCase().includes(e.toLowerCase())||s.artist.toLowerCase().includes(e.toLowerCase())||s.genre.toLowerCase().includes(e.toLowerCase()));return o(r).pipe(a(400))}getAllAlbumsMock(){return o(this.mockAlbums).pipe(a(300))}static \u0275fac=(()=>{let e;return function(s){return(e||(e=f(t)))(s||t)}})();static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})};var k=class t{mockArtists=[{id:"artist-1",name:"Pink Floyd",bio:"Pink Floyd es una banda de rock progresivo inglesa formada en Londres en 1965. Conocidos por su m\xFAsica psicod\xE9lica y experimental, letras filos\xF3ficas y elaborados espect\xE1culos en vivo.",photoUrl:"https://picsum.photos/seed/artist1/400/400",genre:"Progressive Rock",activeYears:"1965-1995, 2005-2014",albums:15,monthlyListeners:25e6},{id:"artist-2",name:"The Beatles",bio:"The Beatles fueron una banda de rock inglesa formada en Liverpool en 1960. Son considerados la banda m\xE1s influyente de todos los tiempos.",photoUrl:"https://picsum.photos/seed/artist2/400/400",genre:"Rock",activeYears:"1960-1970",albums:13,monthlyListeners:35e6},{id:"artist-3",name:"Michael Jackson",bio:"El Rey del Pop. Icono cultural y uno de los artistas m\xE1s significativos del siglo XX.",photoUrl:"https://picsum.photos/seed/artist3/400/400",genre:"Pop",activeYears:"1964-2009",albums:10,monthlyListeners:3e7}];getArtistById(e){let r=this.mockArtists.find(s=>s.id===e);return r?o(r).pipe(a(500)):n(()=>new Error(`Artist with id ${e} not found`)).pipe(a(300))}getArtistAlbums(e){return o([]).pipe(a(300))}searchArtists(e){let r=this.mockArtists.filter(s=>s.name.toLowerCase().includes(e.toLowerCase())||s.genre.toLowerCase().includes(e.toLowerCase()));return o(r).pipe(a(400))}getAllArtists(){return o(this.mockArtists).pipe(a(300))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})};var y=class t{mockSongs=[{id:"song-1",title:"Bohemian Rhapsody",artist:"Queen",artistId:"artist-4",album:"A Night at the Opera",albumId:"4",duration:"5:55",releaseYear:1975,genre:"Rock",coverUrl:"https://picsum.photos/seed/song1/400/400",description:"Una obra maestra del rock progresivo. Considerada una de las mejores canciones de todos los tiempos.",averageRating:4.9,totalReviews:5421},{id:"song-2",title:"Imagine",artist:"John Lennon",artistId:"artist-5",album:"Imagine",albumId:"5",duration:"3:03",releaseYear:1971,genre:"Rock",coverUrl:"https://picsum.photos/seed/song2/400/400",description:"Un himno pacifista que trasciende generaciones. La canci\xF3n m\xE1s ic\xF3nica de John Lennon en solitario.",averageRating:4.8,totalReviews:3892},{id:"song-3",title:"Billie Jean",artist:"Michael Jackson",artistId:"artist-3",album:"Thriller",albumId:"3",duration:"4:54",releaseYear:1982,genre:"Pop",coverUrl:"https://picsum.photos/seed/song3/400/400",description:"El video musical revolucion\xF3 MTV. Una de las canciones m\xE1s reconocibles de la historia del pop.",averageRating:4.7,totalReviews:4123}];mockReviews={"song-1":[{id:"rs1-1",userId:"u2",userName:"Sarah Rock",userAvatar:"https://i.pravatar.cc/150?img=2",rating:5,content:"Simplemente perfecta. La voz de Freddie Mercury es inigualable.",date:new Date("2024-02-10"),likes:89}]};getSongById(e){let r=this.mockSongs.find(s=>s.id===e);return r?o(r).pipe(a(500)):n(()=>new Error(`Song with id ${e} not found`)).pipe(a(300))}getSongReviews(e){let r=this.mockReviews[e]||[];return o(r).pipe(a(300))}searchSongs(e){let r=this.mockSongs.filter(s=>s.title.toLowerCase().includes(e.toLowerCase())||s.artist.toLowerCase().includes(e.toLowerCase())||s.album.toLowerCase().includes(e.toLowerCase())||s.genre.toLowerCase().includes(e.toLowerCase()));return o(r).pipe(a(400))}getAllSongs(){return o(this.mockSongs).pipe(a(300))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})};export{l as a,d as b,T as c,w as d,k as e,y as f};
