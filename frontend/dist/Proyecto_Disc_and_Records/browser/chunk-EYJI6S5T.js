import{a as V}from"./chunk-KQH6VRCU.js";import{a as L}from"./chunk-ZHWTPK4W.js";import{a as U}from"./chunk-4KHEYFTH.js";import{a as q}from"./chunk-EQ2L3S3G.js";import{h as A,j as z}from"./chunk-GFAR6U6U.js";import"./chunk-S7USVMU2.js";import{a as N}from"./chunk-6M2LVSLQ.js";import"./chunk-JA24WYK3.js";import{Ab as P,Cb as _,Eb as l,Fc as I,La as k,Nb as h,Pa as a,Pb as o,Qb as b,Rb as p,Sb as M,Tb as D,Za as S,a as C,b as x,ca as y,cb as F,da as w,hc as R,ma as v,nb as m,ob as u,qb as T,rb as E,sb as d,tb as n,ub as s,vb as f}from"./chunk-7KKLOBFE.js";var $=(r,t)=>t.id;function B(r,t){r&1&&(n(0,"section",12),f(1,"app-spinner"),n(2,"p"),o(3,"Buscando..."),s()())}function W(r,t){if(r&1&&(n(0,"div",21),f(1,"app-rating",22),s()),r&2){let e=l(2).$implicit;a(),d("rating",e.rating)("showValue",!0)}}function j(r,t){if(r&1){let e=P();n(0,"app-card",19),_("click",function(){y(e);let c=l().$implicit,g=l(3);return w(g.viewResult(c))}),n(1,"div",20),o(2),s(),m(3,W,2,2,"div",21),s()}if(r&2){let e=l().$implicit,i=l(3);d("title",e.title)("titleLink","/"+e.type+"/"+e.id)("subtitle",e.subtitle||"")("imageUrl",e.imageUrl)("imageAlt",e.title)("variant",e.type==="album"?"vinilo":"normal"),a(2),M(" ",i.getResultIcon(e.type)," ",i.getResultTypeLabel(e.type)," "),a(),u(e.rating?3:-1)}}function H(r,t){if(r&1&&(n(0,"p",29),o(1),s()),r&2){let e=l(2).$implicit;a(),b(e.subtitle)}}function K(r,t){if(r&1&&(n(0,"p",30),o(1),s()),r&2){let e=l(2).$implicit;a(),b(e.description)}}function Y(r,t){if(r&1&&(n(0,"div",31),f(1,"app-rating",32),s()),r&2){let e=l(2).$implicit;a(),d("rating",e.rating)}}function G(r,t){if(r&1){let e=P();n(0,"div",23),_("click",function(){y(e);let c=l().$implicit,g=l(3);return w(g.viewResult(c))}),n(1,"div",24),f(2,"img",25),s(),n(3,"div",26)(4,"div",27),o(5),s(),n(6,"h3",28),o(7),s(),m(8,H,2,1,"p",29),m(9,K,2,1,"p",30),m(10,Y,2,1,"div",31),s()()}if(r&2){let e=l().$implicit,i=l(3);a(2),d("src",e.imageUrl,k)("alt",e.title),a(3),M(" ",i.getResultIcon(e.type)," ",i.getResultTypeLabel(e.type)," "),a(2),b(e.title),a(),u(e.subtitle?8:-1),a(),u(e.description?9:-1),a(),u(e.rating?10:-1)}}function Q(r,t){if(r&1&&(n(0,"article",16),m(1,j,4,9,"app-card",17),m(2,G,11,8,"div",18),s()),r&2){let e=t.$implicit;a(),u(e.type==="album"||e.type==="artist"?1:-1),a(),u(e.type==="user"||e.type==="review"?2:-1)}}function J(r,t){if(r&1&&(n(0,"section",13)(1,"div",15),T(2,Q,3,2,"article",16,$),s()()),r&2){let e=l(2);a(2),E(e.filteredResults())}}function X(r,t){if(r&1&&(n(0,"span"),o(1," en la categor\xEDa de "),n(2,"strong"),o(3),s()()),r&2){let e=l(3);a(3),p("",e.getResultTypeLabel(e.activeFilter()),"s")}}function Z(r,t){if(r&1&&(n(0,"div",14)(1,"div",33),o(2,"\u{1F50D}"),s(),n(3,"h2",34),o(4,"No se encontraron resultados"),s(),n(5,"p",35),o(6," No encontramos ning\xFAn resultado para "),n(7,"strong"),o(8),s(),m(9,X,4,1,"span"),s(),n(10,"p",36),o(11," Intenta con otro t\xE9rmino de b\xFAsqueda o cambia el filtro "),s()()),r&2){let e=l(2);a(8),p('"',e.searchTerm(),'"'),a(),u(e.activeFilter()!=="all"?9:-1)}}function ee(r,t){if(r&1&&(m(0,J,4,0,"section",13),m(1,Z,12,2,"div",14)),r&2){let e=l();u(e.filteredResults().length>0?0:-1),a(),u(e.filteredResults().length===0?1:-1)}}var O=class r{constructor(t,e){this.route=t;this.router=e}searchTerm=v("");activeFilter=v("all");isLoading=v(!1);allResults=v([{id:1,type:"album",title:"Random Access Memories",subtitle:"Daft Punk",imageUrl:"https://via.placeholder.com/200",rating:5,reviewCount:342},{id:2,type:"album",title:"The Dark Side of the Moon",subtitle:"Pink Floyd",imageUrl:"https://via.placeholder.com/200",rating:5,reviewCount:521},{id:3,type:"artist",title:"Daft Punk",subtitle:"Artista",imageUrl:"https://via.placeholder.com/200",description:"D\xFAo franc\xE9s de m\xFAsica electr\xF3nica"},{id:4,type:"user",title:"PerreteGordete",subtitle:"Usuario",imageUrl:"https://via.placeholder.com/200",description:"Miembro desde Enero 2025"},{id:5,type:"review",title:'Rese\xF1a de "Thriller"',subtitle:"por MusicLover123",imageUrl:"https://via.placeholder.com/200",rating:4,description:"El rey del pop en su m\xE1ximo esplendor. Temas inolvidables que han marcado generaciones..."},{id:6,type:"album",title:"Avantasia",subtitle:"Avantasia",imageUrl:"https://via.placeholder.com/200",rating:5,reviewCount:89},{id:7,type:"album",title:"Hammer King",subtitle:"Hammer King",imageUrl:"https://via.placeholder.com/200",rating:4,reviewCount:45},{id:8,type:"artist",title:"Pink Floyd",subtitle:"Artista",imageUrl:"https://via.placeholder.com/200",description:"Banda brit\xE1nica de rock progresivo"}]);filteredResults=R(()=>{let t=this.activeFilter(),e=this.allResults();return t==="all"?e:e.filter(i=>{switch(t){case"albums":return i.type==="album";case"artists":return i.type==="artist";case"users":return i.type==="user";case"reviews":return i.type==="review";default:return!0}})});resultsCount=R(()=>{let t=this.allResults();return{all:t.length,albums:t.filter(e=>e.type==="album").length,artists:t.filter(e=>e.type==="artist").length,users:t.filter(e=>e.type==="user").length,reviews:t.filter(e=>e.type==="review").length}});ngOnInit(){this.route.queryParams.subscribe(e=>{let i=e.q||"";this.searchTerm.set(i);let c=e.filter;c&&["albums","artists","users","reviews"].includes(c)?this.activeFilter.set(c):this.activeFilter.set("all"),i&&this.performSearch(i)});let t=history.state;t?.previousSearch&&console.log("Volviendo de:",t.previousSearch)}performSearch(t){this.isLoading.set(!0),setTimeout(()=>{this.isLoading.set(!1)},500)}setFilter(t){this.activeFilter.set(t)}isFilterActive(t){return this.activeFilter()===t}getResultIcon(t){switch(t){case"album":return"\u{1F4BF}";case"artist":return"\u{1F3A4}";case"user":return"\u{1F464}";case"review":return"\u{1F4DD}";default:return"\u{1F50D}"}}getResultTypeLabel(t){switch(t){case"album":return"\xC1lbum";case"artist":return"Artista";case"user":return"Usuario";case"review":return"Rese\xF1a";default:return""}}viewResult(t){let e={state:{fromSearch:!0,searchTerm:this.searchTerm(),resultPosition:this.filteredResults().indexOf(t)+1,totalResults:this.filteredResults().length}};switch(t.type){case"album":this.router.navigate(["/album",t.id],x(C({},e),{fragment:"info"}));break;case"artist":this.router.navigate(["/artist",t.id],e);break;case"user":this.router.navigate(["/profile",t.id],e);break;case"review":this.router.navigate(["/album",t.id],x(C({},e),{fragment:"reviews"}));break}}newSearch(t){if(t.trim()){let e={queryParams:{q:t},queryParamsHandling:"merge",replaceUrl:!1};this.router.navigate(["/search"],e)}}applyFilterWithQueryParams(t){this.setFilter(t);let e={queryParams:{filter:t==="all"?null:t},queryParamsHandling:"merge",replaceUrl:!0};this.router.navigate([],e)}goBack(){this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||r)(S(A),S(z))};static \u0275cmp=F({type:r,selectors:[["app-search-results"]],decls:36,vars:31,consts:[[1,"search-results"],[1,"search-results__header"],["variant","secondary","size","md","type","button",3,"click"],[1,"search-results__header-content"],[1,"search-results__title"],[1,"search-results__query"],[1,"search-results__count"],[1,"search-results__search-bar"],[3,"onSearch"],[1,"search-results__filters"],["type","button",1,"search-results__filter",3,"click","variant","fullWidth"],[1,"search-results__filter-count"],[1,"search-results__loading"],[1,"search-results__content"],[1,"search-results__empty"],[1,"search-results__grid"],[1,"search-results__item"],["cardType","polaroid","hoverEffect","lift",1,"search-results__card",3,"title","titleLink","subtitle","imageUrl","imageAlt","variant"],[1,"search-results__custom-card"],["cardType","polaroid","hoverEffect","lift",1,"search-results__card",3,"click","title","titleLink","subtitle","imageUrl","imageAlt","variant"],[1,"search-results__badge"],[1,"search-results__rating"],["size","small",3,"rating","showValue"],[1,"search-results__custom-card",3,"click"],[1,"search-results__custom-image"],[3,"src","alt"],[1,"search-results__custom-content"],[1,"search-results__custom-badge"],[1,"search-results__custom-title"],[1,"search-results__custom-subtitle"],[1,"search-results__custom-description"],[1,"search-results__custom-rating"],["size","medium",3,"rating"],[1,"search-results__empty-icon"],[1,"search-results__empty-title"],[1,"search-results__empty-text"],[1,"search-results__empty-suggestion"]],template:function(e,i){e&1&&(n(0,"main",0)(1,"header",1)(2,"app-button",2),_("click",function(){return i.goBack()}),o(3," \u2190 Volver "),s(),n(4,"div",3)(5,"h1",4),o(6," Resultados para: "),n(7,"span",5),o(8),s()(),n(9,"p",6),o(10),s()()(),n(11,"section",7)(12,"app-search-bar",8),_("onSearch",function(g){return i.newSearch(g)}),s()(),n(13,"nav",9)(14,"app-button",10),_("click",function(){return i.setFilter("all")}),o(15," Todos "),n(16,"span",11),o(17),s()(),n(18,"app-button",10),_("click",function(){return i.setFilter("albums")}),o(19," \u{1F4BF} \xC1lbumes "),n(20,"span",11),o(21),s()(),n(22,"app-button",10),_("click",function(){return i.setFilter("artists")}),o(23," \u{1F3A4} Artistas "),n(24,"span",11),o(25),s()(),n(26,"app-button",10),_("click",function(){return i.setFilter("users")}),o(27," \u{1F464} Usuarios "),n(28,"span",11),o(29),s()(),n(30,"app-button",10),_("click",function(){return i.setFilter("reviews")}),o(31," \u{1F4DD} Rese\xF1as "),n(32,"span",11),o(33),s()()(),m(34,B,4,0,"section",12),m(35,ee,2,2),s()),e&2&&(a(8),p('"',i.searchTerm(),'"'),a(2),D(" ",i.filteredResults().length," resultado",i.filteredResults().length!==1?"s":""," encontrado",i.filteredResults().length!==1?"s":""," "),a(4),h("search-results__filter--active",i.isFilterActive("all")),d("variant",i.isFilterActive("all")?"primary":"ghost")("fullWidth",!0),a(3),p("(",i.resultsCount().all,")"),a(),h("search-results__filter--active",i.isFilterActive("albums")),d("variant",i.isFilterActive("albums")?"primary":"ghost")("fullWidth",!0),a(3),p("(",i.resultsCount().albums,")"),a(),h("search-results__filter--active",i.isFilterActive("artists")),d("variant",i.isFilterActive("artists")?"primary":"ghost")("fullWidth",!0),a(3),p("(",i.resultsCount().artists,")"),a(),h("search-results__filter--active",i.isFilterActive("users")),d("variant",i.isFilterActive("users")?"primary":"ghost")("fullWidth",!0),a(3),p("(",i.resultsCount().users,")"),a(),h("search-results__filter--active",i.isFilterActive("reviews")),d("variant",i.isFilterActive("reviews")?"primary":"ghost")("fullWidth",!0),a(3),p("(",i.resultsCount().reviews,")"),a(),u(i.isLoading()?34:-1),a(),u(i.isLoading()?-1:35))},dependencies:[I,U,L,N,V,q],styles:['@charset "UTF-8";.search-results[_ngcontent-%COMP%]{width:100%;min-height:100vh;background-color:var(--bg-primary)}.search-results__header[_ngcontent-%COMP%]{padding:2rem;background-color:var(--bg-secondary);border-bottom:4px solid var(--border-color);display:flex;align-items:center;gap:2rem}@media (max-width: 768px){.search-results__header[_ngcontent-%COMP%]{padding:2rem 1rem;flex-direction:column;align-items:flex-start;gap:1rem}}.search-results__header-content[_ngcontent-%COMP%]{flex:1}.search-results__title[_ngcontent-%COMP%]{font-size:1.625rem;line-height:3rem;font-weight:700;color:var(--text-primary);margin:0 0 .5rem}@media (max-width: 768px){.search-results__title[_ngcontent-%COMP%]{font-size:1rem;line-height:3rem}}.search-results__query[_ngcontent-%COMP%]{color:var(--color-primary);font-family:Monoton}.search-results__count[_ngcontent-%COMP%]{font-size:.9375rem;line-height:1.5rem;color:var(--text-secondary);margin:0;font-weight:600}.search-results__search-bar[_ngcontent-%COMP%]{padding:2rem;background-color:var(--bg-primary);border-bottom:2px solid var(--border-color);display:flex;justify-content:center}@media (max-width: 768px){.search-results__search-bar[_ngcontent-%COMP%]{padding:2rem 1rem}}.search-results__filters[_ngcontent-%COMP%]{display:flex;gap:0;background-color:var(--bg-secondary);border-bottom:4px solid var(--border-color);overflow-x:auto;-webkit-overflow-scrolling:touch}.search-results__filters[_ngcontent-%COMP%]::-webkit-scrollbar{height:4px}.search-results__filters[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-primary)}.search-results__filters[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-primary);border-radius:5px}.search-results__filter[_ngcontent-%COMP%]{flex:1;min-width:fit-content;white-space:nowrap}@media (max-width: 768px){.search-results__filter[_ngcontent-%COMP%]{font-size:.9375rem;line-height:1.5rem;flex:0 0 auto}}.search-results__filter-count[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;opacity:.7}.search-results__loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;gap:1rem}.search-results__loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:3rem;color:var(--text-secondary);font-weight:600}.search-results__content[_ngcontent-%COMP%]{padding:2rem}@media (max-width: 768px){.search-results__content[_ngcontent-%COMP%]{padding:2rem 1rem}}.search-results__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:2rem;max-width:1400px;margin:0 auto}@media (max-width: 1024px){.search-results__grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:2rem}}@media (max-width: 768px){.search-results__grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:1rem}}.search-results__item[_ngcontent-%COMP%]{position:relative}.search-results__card[_ngcontent-%COMP%]{cursor:pointer}.search-results__badge[_ngcontent-%COMP%]{position:absolute;top:1rem;left:1rem;background-color:var(--bg-primary);color:var(--text-primary);padding:.5rem 1rem;font-size:.875rem;line-height:1.5rem;font-weight:600;text-transform:uppercase;border:2px solid var(--border-color);box-shadow:2px 2px #01131b;z-index:2}.search-results__rating[_ngcontent-%COMP%]{position:absolute;bottom:1rem;right:1rem;background-color:var(--color-primary);color:var(--text-dark);padding:.5rem 1rem;border-radius:20px;font-size:.875rem;line-height:1.5rem;font-weight:600;box-shadow:0 2px 8px color-mix(in srgb,var(--shadow-color) 20%,transparent);z-index:10}.search-results__custom-card[_ngcontent-%COMP%]{background-color:var(--bg-secondary);border:4px solid var(--border-color);box-shadow:4px 4px #01131b;cursor:pointer;transition:all .3s ease-in-out;overflow:hidden}.search-results__custom-card[_ngcontent-%COMP%]:hover:not(:disabled):not(.button--disabled){box-shadow:4px 4px #01131b;transform:translate(2px,2px)}.search-results__custom-card[_ngcontent-%COMP%]:active:not(:disabled):not(.button--disabled){box-shadow:0 0 #01131b;transform:translate(4px,4px)}.search-results__custom-image[_ngcontent-%COMP%]{width:100%;height:200px;overflow:hidden;border-bottom:2px solid var(--border-color);background-color:var(--bg-primary)}.search-results__custom-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.search-results__custom-content[_ngcontent-%COMP%]{padding:1rem}.search-results__custom-badge[_ngcontent-%COMP%]{display:inline-block;background-color:var(--bg-primary);color:var(--text-primary);padding:.5rem;font-size:.75rem;line-height:1rem;font-weight:700;border:2px solid var(--border-color);margin-bottom:1rem;text-transform:uppercase}.search-results__custom-title[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem;font-weight:700;color:var(--text-primary);margin:0 0 .5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.search-results__custom-subtitle[_ngcontent-%COMP%]{font-size:.9375rem;line-height:1.5rem;color:var(--text-secondary);margin:0 0 .5rem}.search-results__custom-description[_ngcontent-%COMP%]{font-size:.9375rem;line-height:1.5rem;color:var(--text-primary);margin:0;line-height:1.5;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.search-results__custom-rating[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem}.search-results__custom-rating[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{color:var(--text-placeholder);font-size:1rem}.search-results__custom-rating[_ngcontent-%COMP%]   .star--filled[_ngcontent-%COMP%]{color:var(--color-primary)}.search-results__empty[_ngcontent-%COMP%]{max-width:600px;margin:4rem auto;padding:3rem 2rem;text-align:center;background-color:var(--bg-secondary);border:4px solid var(--border-color);box-shadow:6px 6px #01131b}@media (max-width: 768px){.search-results__empty[_ngcontent-%COMP%]{margin:2rem 1rem;padding:2rem 1rem}}.search-results__empty-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:2rem;opacity:.5}.search-results__empty-title[_ngcontent-%COMP%]{font-size:1.625rem;line-height:3rem;font-weight:700;color:var(--text-primary);margin:0 0 1rem}@media (max-width: 768px){.search-results__empty-title[_ngcontent-%COMP%]{font-size:1rem;line-height:3rem}}.search-results__empty-text[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;color:var(--text-secondary);margin:0 0 1rem;line-height:1.6}.search-results__empty-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-primary)}.search-results__empty-suggestion[_ngcontent-%COMP%]{font-size:.9375rem;line-height:1.5rem;color:var(--text-placeholder);margin:0;font-style:italic}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.search-results__item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease-out}']})};export{O as default};
