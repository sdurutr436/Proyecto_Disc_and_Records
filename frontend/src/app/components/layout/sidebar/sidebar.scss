@use '../../../../styles/00-settings/variables' as vars;
@use '../../../../styles/01-tools/mixins' as mix;

/* ========================================
   SIDEBAR - Mobile-First Responsive
   Mobile: Bottom navigation bar (fixed)
   Tablet+: Sidebar lateral tradicional
   ======================================== */

/* --- Bloque Sidebar --- */
.sidebar {
  // BASE MÓVIL: Bottom navigation bar
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  width: 100%;
  z-index: vars.$z-sticky;
  background-color: var(--bg-secondary);
  border-top: vars.$borde-brutal-thick;
  border-left: none;
  border-right: none;
  border-bottom: none;
  border-radius: 0;
  box-shadow: 0 -0.25rem 0.5rem rgba(0, 0, 0, 0.1);

  // TABLET: Sidebar lateral pero no sticky
  @include mix.respond-from('tablet') {
    position: relative;
    bottom: auto;
    left: auto;
    right: auto;
    width: 100%;
    border: vars.$borde-brutal-thick;
    border-radius: vars.$radio-s;
    box-shadow: vars.$sombra-brutal-m;
  }

  // DESKTOP: Sidebar sticky lateral
  @include mix.respond-from('desktop') {
    width: 18.75rem;
    position: sticky;
    top: calc(4.375rem + vars.$espaciado-m);
    max-height: calc(100vh - 6.25rem);
    overflow-y: auto;
  }
}
/* --- Elemento: Container --- */
.sidebar__container {
  // BASE MÓVIL: Layout horizontal para bottom-nav
  padding: vars.$espaciado-xs vars.$espaciado-s;
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  align-items: center;
  gap: vars.$espaciado-xs;

  // TABLET: Layout vertical tradicional
  @include mix.respond-from('tablet') {
    flex-direction: column;
    align-items: stretch;
    padding: vars.$espaciado-m;
    gap: vars.$espaciado-m;
  }

  // DESKTOP: Más espacio
  @include mix.respond-from('desktop') {
    gap: vars.$espaciado-l;
  }
}

/* --- Elemento: Section --- */
.sidebar__section {
  // BASE MÓVIL: Ocultar secciones en bottom-nav
  display: none;

  // TABLET+: Mostrar secciones
  @include mix.respond-from('tablet') {
    display: flex;
    flex-direction: column;
    gap: vars.$espaciado-s;
    padding-bottom: vars.$espaciado-m;
    border-bottom: vars.$borde-brutal-thin;

    &:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }
  }
}

/* --- Elemento: Title --- */
.sidebar__title {
  font-size: vars.$tamanio-fuente-texto-pequeno-m;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* --- Elemento: User --- */
.sidebar__user {
  display: flex;
  align-items: center;
  gap: vars.$espaciado-s;
  padding: vars.$espaciado-s;
  border: vars.$borde-brutal-medium;
  border-radius: vars.$radio-s;
  background-color: var(--bg-secondary);
  box-shadow: vars.$sombra-brutal-s;
  transition: all vars.$transicion-rapida;

  &:hover {
    box-shadow: vars.$sombra-brutal-hover;
    transform: translate(0.125rem, 0.125rem);
  }
}

.sidebar__user-avatar {
  width: 3.125rem;
  height: 3.125rem;
  border-radius: 50%;
  background-color: var(--color-accent);
  color: var(--text-dark);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: vars.$tamanio-fuente-texto-pequeno-m;
  border: vars.$borde-brutal-medium;
  flex-shrink: 0;
}

.sidebar__user-info {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  overflow: hidden;
}

.sidebar__user-name {
  font-weight: 600;
  font-size: vars.$tamanio-fuente-texto-pequeno-s;
  color: var(--text-primary);
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sidebar__user-stats {
  font-size: vars.$tamanio-fuente-texto-pequeno-xs;
  color: vars.$color-letra-desactivado;
  margin: 0;
}

/* --- Elemento: Nav --- */
.sidebar__nav {
  // BASE MÓVIL: Ocupar todo el ancho del bottom-nav
  display: flex;
  flex-direction: row;
  width: 100%;
  gap: 0;

  // TABLET+: Layout vertical
  @include mix.respond-from('tablet') {
    flex-direction: column;
    gap: vars.$espaciado-s;
  }
}

/* --- Título de nav en bottom-nav --- */
.sidebar__nav .sidebar__title {
  // Ocultar en móvil
  display: none;

  @include mix.respond-from('tablet') {
    display: block;
  }
}

.sidebar__list {
  // BASE MÓVIL: Lista horizontal para bottom-nav
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  width: 100%;
  gap: 0;

  // TABLET+: Lista vertical
  @include mix.respond-from('tablet') {
    flex-direction: column;
    gap: vars.$espaciado-xs;
  }
}

// .sidebar__list-item - Sin estilos específicos necesarios

/* --- Elemento: Link --- */
.sidebar__link {
  // BASE MÓVIL: Iconos centrados verticalmente para bottom-nav
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: vars.$espaciado-tiny;
  padding: vars.$espaciado-xs;
  text-decoration: none;
  color: var(--text-primary);
  font-size: vars.$tamanio-fuente-texto-pequeno-xs;
  border: none;
  border-radius: vars.$radio-s;
  background-color: transparent;
  transition: all vars.$transicion-rapida;
  flex: 1;
  min-width: 3.5rem;

  // TABLET+: Layout horizontal tradicional
  @include mix.respond-from('tablet') {
    flex-direction: row;
    justify-content: flex-start;
    gap: vars.$espaciado-s;
    padding: vars.$espaciado-xs vars.$espaciado-s;
    font-size: vars.$tamanio-fuente-texto-pequeno-s;
    border: vars.$borde-brutal-medium;
    flex: none;
    min-width: auto;
  }

  &:hover {
    background-color: var(--color-primary);
    color: var(--text-dark);

    @include mix.respond-from('tablet') {
      box-shadow: vars.$sombra-brutal-s;
      transform: translate(0.125rem, 0.125rem);
    }
  }

  &:focus-visible {
    outline: 0.1875rem solid var(--color-primary);
    outline-offset: 0.125rem;
  }
}

/* --- Texto del link: Ocultar en móvil muy pequeño --- */
.sidebar__link-text {
  // Texto muy pequeño en móvil
  font-size: vars.$tamanio-fuente-micro;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 4rem;

  @include mix.respond-from('mobile-l') {
    max-width: none;
    font-size: vars.$tamanio-fuente-texto-pequeno-xs;
  }

  @include mix.respond-from('tablet') {
    flex: 1;
    font-size: inherit;
  }
}

/* --- Modificador: Link Activo --- */
.sidebar__link--active {
  background-color: var(--color-primary);
  color: var(--text-dark);

  @include mix.respond-from('tablet') {
    box-shadow: vars.$sombra-brutal-s;
  }
}

.sidebar__link-icon {
  font-size: vars.$icono-s;
  line-height: 1;
  flex-shrink: 0;
}

/* --- Elemento: Trending (solo visible en tablet+) --- */
.sidebar__trending {
  display: flex;
  flex-direction: column;
  gap: vars.$espaciado-xs;
}

.sidebar__trending-item {
  display: flex;
  align-items: center;
  gap: vars.$espaciado-s;
  padding: vars.$espaciado-xs vars.$espaciado-s;
  border: vars.$borde-brutal-thin;
  border-radius: vars.$radio-s;
  background-color: var(--bg-secondary);
  transition: all vars.$transicion-rapida;

  &:hover {
    box-shadow: vars.$sombra-brutal-s;
    transform: translate(0.125rem, 0.125rem);
  }
}

.sidebar__trending-number {
  font-weight: 700;
  font-size: vars.$tamanio-fuente-texto-pequeno-m;
  color: var(--color-primary);
  flex-shrink: 0;
}

.sidebar__trending-text {
  font-size: vars.$tamanio-fuente-texto-pequeno-xs;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* --- Scrollbar personalizado (opcional) --- */
.sidebar::-webkit-scrollbar {
  width: 0.5rem;
}

.sidebar::-webkit-scrollbar-track {
  background: var(--bg-secondary);
}

.sidebar::-webkit-scrollbar-thumb {
  background: var(--color-primary);
  border-radius: vars.$radio-xs;
  border: 0.125rem solid var(--bg-secondary);

  &:hover {
    background: var(--color-secondary);
  }
}
