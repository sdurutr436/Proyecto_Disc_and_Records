<form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form" method="post" novalidate>
  <!-- Fieldset para agrupar campos de autenticación -->
  <fieldset class="login-form__fieldset">
    <legend class="login-form__legend">Inicia sesión en tu cuenta</legend>

    <!-- Campo de correo electrónico -->
    <div class="login-form__field">
      <label for="login-email" class="login-form__label">
        Correo electrónico
        <span class="login-form__required" aria-label="Campo requerido">*</span>
      </label>
      <input
        id="login-email"
        type="email"
        [formControl]="loginForm.get('email')"
        placeholder="tu@email.com"
        class="login-form__input"
        [class.login-form__input--error]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
        [attr.aria-invalid]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
        [attr.aria-describedby]="(loginForm.get('email')?.invalid && loginForm.get('email')?.touched) ? 'email-error' : 'email-help'"
        autocomplete="email" />

      <!-- Mensaje de error -->
      @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
      <p
        id="email-error"
        class="login-form__error"
        role="alert">
        @if (loginForm.get('email')?.hasError('required')) {
          Email es requerido
        }
        @if (loginForm.get('email')?.hasError('email')) {
          Email debe ser válido (ej: usuario@dominio.com)
        }
      </p>
      }

      <!-- Texto de ayuda -->
      @if (!loginForm.get('email')?.invalid || !loginForm.get('email')?.touched) {
      <p
        id="email-help"
        class="login-form__help">
        Introduce el correo con el que te registraste
      </p>
      }
    </div>

    <!-- Campo de contraseña -->
    <div class="login-form__field">
      <label for="login-password" class="login-form__label">
        Contraseña
        <span class="login-form__required" aria-label="Campo requerido">*</span>
      </label>
      <input
        id="login-password"
        type="password"
        [formControl]="loginForm.get('password')"
        placeholder="••••••••"
        class="login-form__input"
        [class.login-form__input--error]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
        [attr.aria-invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
        [attr.aria-describedby]="(loginForm.get('password')?.invalid && loginForm.get('password')?.touched) ? 'password-error' : 'password-help'"
        autocomplete="current-password" />

      <!-- Mensaje de error -->
      @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
      <p
        id="password-error"
        class="login-form__error"
        role="alert">
        @if (loginForm.get('password')?.hasError('required')) {
          Contraseña es requerida
        }
        @if (loginForm.get('password')?.hasError('minlength')) {
          Contraseña debe tener al menos 8 caracteres
        }
      </p>
      }

      <!-- Texto de ayuda -->
      @if (!loginForm.get('password')?.invalid || !loginForm.get('password')?.touched) {
      <p
        id="password-help"
        class="login-form__help">
        Mínimo 8 caracteres
      </p>
      }
    </div>
  </fieldset>

  <!-- Botón de submit -->
  <button
    type="submit"
    class="login-form__submit"
    [disabled]="loginForm.invalid || isSubmitting()"
    [attr.aria-busy]="isSubmitting()">
    {{ isSubmitting() ? 'INICIANDO SESIÓN...' : 'INICIAR SESIÓN' }}
  </button>

  <!-- Link de recuperación de contraseña -->
  <div class="login-form__footer">
    <a href="#" class="login-form__link">¿Olvidaste tu contraseña?</a>
  </div>
</form>
