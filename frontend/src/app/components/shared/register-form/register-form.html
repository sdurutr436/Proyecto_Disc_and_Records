<form class="register-form" (submit)="onSubmit($event)" method="post" novalidate>
  <!-- Fieldset 1: Información de cuenta -->
  <fieldset class="register-form__fieldset">
    <legend class="register-form__legend">Crea tu cuenta</legend>
    
    <!-- Campo de nombre de usuario -->
    <div class="register-form__field">
      <label for="register-username" class="register-form__label">
        Nombre de usuario
        <span class="register-form__required" aria-label="Campo requerido">*</span>
      </label>
      <input
        id="register-username"
        type="text"
        name="username"
        placeholder="tunombredeusuario"
        required
        [value]="username()"
        (input)="onUsernameChange($event)"
        class="register-form__input"
        [class.register-form__input--error]="usernameError()"
        [attr.aria-invalid]="usernameError()"
        [attr.aria-describedby]="usernameError() ? 'username-error' : 'username-help'"
        autocomplete="username" />
      
      <!-- Mensaje de error -->
      <span 
        *ngIf="usernameError()" 
        id="username-error"
        class="register-form__error"
        role="alert">
        {{ usernameErrorMessage() }}
      </span>
      
      <!-- Texto de ayuda -->
      <span 
        *ngIf="!usernameError()" 
        id="username-help"
        class="register-form__help">
        Este será tu nombre visible en Discs & Records
      </span>
    </div>
    
    <!-- Campo de correo electrónico (reutilizado de login) -->
    <div class="register-form__field">
      <label for="register-email" class="register-form__label">
        Correo electrónico
        <span class="register-form__required" aria-label="Campo requerido">*</span>
      </label>
      <input
        id="register-email"
        type="email"
        name="email"
        placeholder="tu@email.com"
        required
        [value]="email()"
        (input)="onEmailChange($event)"
        class="register-form__input"
        [class.register-form__input--error]="emailError()"
        [attr.aria-invalid]="emailError()"
        [attr.aria-describedby]="emailError() ? 'email-error' : 'email-help'"
        autocomplete="email" />
      
      <!-- Mensaje de error -->
      <span 
        *ngIf="emailError()" 
        id="email-error"
        class="register-form__error"
        role="alert">
        {{ emailErrorMessage() }}
      </span>
      
      <!-- Texto de ayuda -->
      <span 
        *ngIf="!emailError()" 
        id="email-help"
        class="register-form__help">
        Lo usaremos para enviarte actualizaciones de tus álbumes favoritos
      </span>
    </div>
  </fieldset>
  
  <!-- Fieldset 2: Seguridad -->
  <fieldset class="register-form__fieldset">
    <legend class="register-form__legend">Seguridad</legend>
    
    <!-- Campo de contraseña (reutilizado de login) -->
    <div class="register-form__field">
      <label for="register-password" class="register-form__label">
        Contraseña
        <span class="register-form__required" aria-label="Campo requerido">*</span>
      </label>
      <input
        id="register-password"
        type="password"
        name="password"
        placeholder="••••••••"
        required
        [value]="password()"
        (input)="onPasswordChange($event)"
        class="register-form__input"
        [class.register-form__input--error]="passwordError()"
        [attr.aria-invalid]="passwordError()"
        [attr.aria-describedby]="passwordError() ? 'password-error' : 'password-help'"
        autocomplete="new-password" />
      
      <!-- Mensaje de error -->
      <span 
        *ngIf="passwordError()" 
        id="password-error"
        class="register-form__error"
        role="alert">
        {{ passwordErrorMessage() }}
      </span>
      
      <!-- Texto de ayuda -->
      <span 
        *ngIf="!passwordError()" 
        id="password-help"
        class="register-form__help">
        Mínimo 8 caracteres para proteger tu cuenta
      </span>
    </div>
    
    <!-- Campo de confirmación de contraseña -->
    <div class="register-form__field">
      <label for="register-confirm-password" class="register-form__label">
        Confirmar contraseña
        <span class="register-form__required" aria-label="Campo requerido">*</span>
      </label>
      <input
        id="register-confirm-password"
        type="password"
        name="confirmPassword"
        placeholder="••••••••"
        required
        [value]="confirmPassword()"
        (input)="onConfirmPasswordChange($event)"
        class="register-form__input"
        [class.register-form__input--error]="confirmPasswordError()"
        [attr.aria-invalid]="confirmPasswordError()"
        [attr.aria-describedby]="confirmPasswordError() ? 'confirm-password-error' : 'confirm-password-help'"
        autocomplete="new-password" />
      
      <!-- Mensaje de error -->
      <span 
        *ngIf="confirmPasswordError()" 
        id="confirm-password-error"
        class="register-form__error"
        role="alert">
        {{ confirmPasswordErrorMessage() }}
      </span>
      
      <!-- Texto de ayuda -->
      <span 
        *ngIf="!confirmPasswordError()" 
        id="confirm-password-help"
        class="register-form__help">
        Vuelve a escribir tu contraseña
      </span>
    </div>
  </fieldset>
  
  <!-- Botón de submit -->
  <button 
    type="submit" 
    class="register-form__submit"
    [disabled]="isSubmitting()"
    [attr.aria-busy]="isSubmitting()">
    {{ isSubmitting() ? 'CREANDO CUENTA...' : 'CREAR CUENTA' }}
  </button>
  
  <!-- Link de inicio de sesión -->
  <div class="register-form__footer">
    <p class="register-form__footer-text">
      ¿Ya tienes cuenta? 
      <a href="#" class="register-form__link">Inicia sesión</a>
    </p>
  </div>
</form>
