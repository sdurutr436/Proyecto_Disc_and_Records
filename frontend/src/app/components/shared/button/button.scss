@use '../../../../styles/00-settings/variables' as vars;
@use '../../../../styles/01-tools/mixins' as mix;

/* ========================================
   COMPONENTE: BUTTON
   Sistema completo de botones neobrutalistas
   ======================================== */

/* --- Estilos base del botón --- */
.button {
  @include mix.brutal-button-base;
  box-shadow: 4px 4px 0px var(--shadow-color);
  position: relative;

  // Tamaño por defecto (medium)
  padding: vars.$espaciado-s vars.$espaciado-l;
  font-size: vars.$tamanio-fuente-texto-pequeno-s;
  min-height: vars.$touch-min-height-md;
}

/* ========================================
   VARIANTES DE COLOR
   ======================================== */

/* --- Variante: Primary --- */
.button--primary {
  background-color: var(--color-primary);
  color: var(--text-dark);
  border-color: var(--border-color);
  box-shadow: 4px 4px 0px var(--shadow-color);

  &:hover:not(.button--disabled) {
    background-color: var(--color-secondary);
    box-shadow: 2px 2px 0px var(--shadow-color);
    transform: translate(2px, 2px);
  }

  &:active:not(.button--disabled) {
    box-shadow: 0px 0px 0px var(--shadow-color);
    transform: translate(4px, 4px);
  }
}

/* --- Variante: Secondary --- */
.button--secondary {
  background-color: var(--bg-secondary);
  color: var(--text-primary);
  border-color: var(--border-color);
  box-shadow: 4px 4px 0px var(--shadow-color);

  &:hover:not(.button--disabled) {
    background-color: var(--bg-primary);
    box-shadow: 2px 2px 0px var(--shadow-color);
    transform: translate(2px, 2px);
  }

  &:active:not(.button--disabled) {
    box-shadow: 0px 0px 0px var(--shadow-color);
    transform: translate(4px, 4px);
  }
}

/* --- Variante: Ghost --- */
.button--ghost {
  background-color: transparent;
  color: var(--text-primary);
  border-color: var(--border-color);
  box-shadow: none;

  &:hover:not(.button--disabled) {
    background-color: var(--bg-secondary);
    box-shadow: 2px 2px 0px var(--shadow-color);
  }

  &:active:not(.button--disabled) {
    background-color: var(--color-primary);
    transform: translate(1px, 1px);
  }
}

/* --- Variante: Danger --- */
.button--danger {
  background-color: vars.$color-error;
  color: vars.$color-letra-blanca;
  border-color: var(--border-color);
  box-shadow: 4px 4px 0px var(--shadow-color);

  &:hover:not(.button--disabled) {
    background-color: var(--color-accent);
    box-shadow: 2px 2px 0px var(--shadow-color);
    transform: translate(2px, 2px);
  }

  &:active:not(.button--disabled) {
    box-shadow: 0px 0px 0px var(--shadow-color);
    transform: translate(4px, 4px);
  }
}

/* ========================================
   TAMAÑOS
   ======================================== */

/* --- Tamaño: Small --- */
.button--sm {
  padding: vars.$espaciado-xs vars.$espaciado-m;
  font-size: vars.$tamanio-fuente-texto-pequeno-xs;
  min-height: vars.$touch-min-height-sm;
}

/* --- Tamaño: Medium (ya definido en base) --- */
.button--md {
  padding: vars.$espaciado-s vars.$espaciado-l;
  font-size: vars.$tamanio-fuente-texto-pequeno-s;
  min-height: vars.$touch-min-height-md;
}

/* --- Tamaño: Large --- */
.button--lg {
  padding: vars.$espaciado-m vars.$espaciado-xl;
  font-size: vars.$tamanio-fuente-texto-pequeno-m;
  min-height: vars.$touch-min-height-lg;
}

/* ========================================
   ESTADOS ESPECIALES
   ======================================== */

/* --- Estado: Disabled --- */
.button--disabled {
  @include mix.state-disabled;
  box-shadow: none;
}

/* --- Estado: Loading --- */
.button--loading {
  position: relative;
  cursor: wait;
  pointer-events: none;

  .button__content {
    visibility: hidden;
  }
}

/* Mini margarita flower power spinner para botones */
.button__spinner {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 22px;
  height: 22px;
  animation: button-flower-spin 1.5s linear infinite;

  /* Margarita inline SVG via background - usa currentColor para adaptarse */
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cellipse cx='50' cy='20' rx='12' ry='18' fill='%23333' stroke='%23222' stroke-width='1.5'/%3E%3Cellipse cx='50' cy='20' rx='12' ry='18' fill='%23333' stroke='%23222' stroke-width='1.5' transform='rotate(45 50 50)'/%3E%3Cellipse cx='50' cy='20' rx='12' ry='18' fill='%23333' stroke='%23222' stroke-width='1.5' transform='rotate(90 50 50)'/%3E%3Cellipse cx='50' cy='20' rx='12' ry='18' fill='%23333' stroke='%23222' stroke-width='1.5' transform='rotate(135 50 50)'/%3E%3Cellipse cx='50' cy='20' rx='12' ry='18' fill='%23333' stroke='%23222' stroke-width='1.5' transform='rotate(180 50 50)'/%3E%3Cellipse cx='50' cy='20' rx='12' ry='18' fill='%23333' stroke='%23222' stroke-width='1.5' transform='rotate(225 50 50)'/%3E%3Cellipse cx='50' cy='20' rx='12' ry='18' fill='%23333' stroke='%23222' stroke-width='1.5' transform='rotate(270 50 50)'/%3E%3Cellipse cx='50' cy='20' rx='12' ry='18' fill='%23333' stroke='%23222' stroke-width='1.5' transform='rotate(315 50 50)'/%3E%3Ccircle cx='50' cy='50' r='14' fill='%23fff' stroke='%23222' stroke-width='2'/%3E%3Ccircle cx='50' cy='50' r='3' fill='%23333'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
}

.button__content--hidden {
  visibility: hidden;
}

@keyframes button-flower-spin {
  0% {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  100% {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

/* Tamaño del spinner según tamaño del botón */
.button--sm .button__spinner {
  width: 16px;
  height: 16px;
}

.button--lg .button__spinner {
  width: 28px;
  height: 28px;
}

/* --- Modificador: Full Width --- */
.button--full-width {
  width: 100%;
}

/* ========================================
   RESPONSIVE
   ======================================== */
@include mix.mobile-down {
  .button {
    padding: vars.$espaciado-xs vars.$espaciado-m;
    font-size: vars.$tamanio-fuente-texto-pequeno-xs;
  }

  .button--lg {
    padding: vars.$espaciado-s vars.$espaciado-l;
    font-size: vars.$tamanio-fuente-texto-pequeno-s;
  }
}
