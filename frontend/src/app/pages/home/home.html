<div class="home">
  <!-- ============================================ -->
  <!-- SECCI칍N HERO: Backdrop Adaptativo con Siluetas -->
  <!-- ============================================ -->
  <section
    class="home__hero"
    [class.home__hero--dark]="isDarkMode"
    [class.home__hero--grayscale]="isGrayscale"
  >
    <!-- Contenedor del backdrop con color del artista -->
    <div class="home__hero-backdrop">
      <!-- Imagen de silueta con blend mode para tintado -->
      <picture class="home__hero-picture">
        <!-- Versi칩n mobile (m치s peque침a) -->
        <source
          media="(max-width: 767px)"
          [srcset]="currentHero.src"
          type="image/webp"
        />
        <!-- Versi칩n desktop -->
        <img
          class="home__hero-silhouette"
          [src]="currentHero.src"
          [alt]="'Silueta de ' + currentHero.name"
          loading="eager"
          decoding="async"
        />
      </picture>
    </div>

    <!-- Overlay gradiente para legibilidad -->
    <div class="home__hero-overlay"></div>

    <!-- Contenido del hero -->
    <div class="home__hero-content">
      <!-- Eslogan principal -->
      <h1 class="home__slogan animate-fade-in-up">
        Punt칰a todos tus 치lbumes favoritos
        <span class="home__slogan-highlight">en un solo lugar</span>
      </h1>

      <!-- Bot칩n de llamada a la acci칩n -->
      <app-button
        variant="primary"
        size="lg"
        (clicked)="openRegisterModal()"
        class="home__cta-button animate-fade-in-up"
      >
        COMIENZA AQU칈
      </app-button>
    </div>
  </section>

  <!-- ============================================ -->
  <!-- SECCI칍N DE B칔SQUEDA                          -->
  <!-- ============================================ -->
  <section class="home__search">
    <app-search-bar
      (onSearch)="handleSearch($event)"
    ></app-search-bar>
  </section>

  <!-- ============================================ -->
  <!-- CARRUSEL: 츼LBUMES EN TENDENCIA               -->
  <!-- ============================================ -->
  <section class="home__section">
    @if (isLoading()) {
      <!-- Estado de carga para el carrusel -->
      <div class="home__carousel-loading">
        <h2 class="home__carousel-title">칔LTIMOS 츼LBUMES EN TENDENCIA</h2>
        <div class="home__spinner-container">
          <app-spinner mode="inline" size="lg"></app-spinner>
          <p class="home__loading-text">Cargando 치lbumes...</p>
        </div>
      </div>
    } @else {
      <app-carousel title="칔LTIMOS 츼LBUMES EN TENDENCIA">
        @for (album of trendingAlbums(); track album.id) {
          <app-card
            [title]="album.title"
            [titleLink]="'/album/' + album.id"
            [subtitle]="album.artist"
            [subtitleLink]="'/artist/' + album.artist"
            [imageUrl]="album.imageUrl"
            [imageAlt]="album.title + ' por ' + album.artist"
            variant="vinilo"
            cardType="polaroid"
            hoverEffect="lift"
            (click)="viewAlbumDetails(album.id)"
            class="home__album-card"
          >
            <!-- Badge de rating si est치 disponible -->
            @if (album.rating) {
              <div class="home__rating">
                <app-rating [rating]="album.rating" [showValue]="true" size="small" />
              </div>
            }
          </app-card>
        }
      </app-carousel>
    }
  </section>

  <!-- ============================================ -->
  <!-- CARRUSEL: 츼LBUMES RESE칌ADOS                  -->
  <!-- ============================================ -->
  <section class="home__section">
    @if (isLoading()) {
      <!-- Estado de carga para el carrusel -->
      <div class="home__carousel-loading">
        <h2 class="home__carousel-title">칔LTIMOS 츼LBUMES RESE칌ADOS</h2>
        <div class="home__spinner-container">
          <app-spinner mode="inline" size="lg"></app-spinner>
          <p class="home__loading-text">Cargando 치lbumes...</p>
        </div>
      </div>
    } @else {
      <app-carousel title="칔LTIMOS 츼LBUMES RESE칌ADOS">
        @for (album of recentReviews(); track album.id) {
          <app-card
            [title]="album.title"
            [titleLink]="'/album/' + album.id"
            [subtitle]="album.artist"
            [subtitleLink]="'/artist/' + album.artist"
            [imageUrl]="album.imageUrl"
            [imageAlt]="album.title + ' por ' + album.artist"
            variant="vinilo"
            cardType="polaroid"
            hoverEffect="lift"
            (click)="viewAlbumDetails(album.id)"
            class="home__album-card"
          >
            <!-- Badge de n칰mero de rese침as -->
            @if (album.reviewCount) {
              <div class="home__reviews">
                游눫 {{ album.reviewCount }} rese침as
              </div>
            }
          </app-card>
        }
      </app-carousel>
    }
  </section>

  <!-- ============================================ -->
  <!-- CARRUSEL: MIS 칔LTIMOS RESE칌ADOS (Solo auth)  -->
  <!-- ============================================ -->
  @if (isAuthenticated && myReviewedAlbums().length > 0) {
    <section class="home__section home__section--personal">
      <app-carousel title="MIS 칔LTIMOS 츼LBUMES RESE칌ADOS">
        @for (album of myReviewedAlbums(); track album.id) {
          <app-card
            [title]="album.title"
            [titleLink]="'/album/' + album.id"
            [subtitle]="album.artist"
            [subtitleLink]="'/artist/' + album.artist"
            [imageUrl]="album.imageUrl"
            [imageAlt]="album.title + ' por ' + album.artist"
            variant="vinilo"
            cardType="polaroid"
            hoverEffect="lift"
            (click)="viewAlbumDetails(album.id)"
            class="home__album-card"
          >
            <!-- Badge de mi rating -->
            @if (album.rating) {
              <div class="home__rating home__rating--personal">
                <app-rating [rating]="album.rating" [showValue]="true" size="small" />
              </div>
            }
          </app-card>
        }
      </app-carousel>
    </section>
  }
</div>
